<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#121212">
    <title>LifeMode Ultimate</title>
    <link rel="manifest" href="manifest.json"> 
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Georgian:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <link rel="stylesheet" href="style.css">

    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-core"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-converter"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-webgl"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/pose-detection"></script>
</head>
<body>

    <svg style="position: absolute; width: 0; height: 0;" version="1.1">
        <defs>
            <pattern id="rustPattern" patternUnits="userSpaceOnUse" width="10" height="10">
                <line x1="0" y1="0" x2="10" y2="10" stroke="#552222" stroke-width="2" />
                <line x1="10" y1="0" x2="0" y2="10" stroke="#331111" stroke-width="2" />
            </pattern>
        </defs>
    </svg>

    <div id="home" class="section active">
        <div class="home-header">
            <div class="header-top">
                <h2 class="app-title">LifeMode</h2>
                <div class="level-badge" id="levelDisplay">LVL 1</div>
            </div>

            <div class="main-circle-container">
                <div class="progress-ring" id="dailyRing">
                    <div class="progress-inner">
                        <span class="goal-label">рЃЊрЃдрЃўрЃА рЃЏрЃўрЃќрЃљрЃюрЃў</span>
                        <p class="goal-text"><span id="dailyXp">0</span>%</p>
                    </div>
                </div>
            </div>

            <div id="activeBetBanner" class="bet-banner" style="display:none; margin: 0 20px 20px 20px;">
                <div style="display:flex; flex-direction:column; align-items:flex-start;">
                    <span>­Ъј▓ рЃцрЃАрЃЮрЃюрЃў рЃљрЃЦрЃбрЃўрЃБрЃарЃўрЃљ</span>
                    <small style="color:#fff; opacity:0.8;">рЃърЃарЃЮрЃњрЃарЃћрЃАрЃў: <span id="betTargetDisplay">0/0</span> XP</small>
                </div>
                <div style="text-align:right;">
                    <small id="betTimerDisplay">24:00</small>
                </div>
            </div>

            <div class="stats-row">
                <div class="stat-card">
                    <span class="stat-num" id="totalPoints">0</span>
                    <span class="stat-desc">XP рЃЦрЃБрЃџрЃљ</span>
                </div>
                <div class="stat-card">
                    <span class="stat-num" id="coinDisplay">0</span>
                    <span class="stat-desc">рЃЮрЃЦрЃарЃЮ</span>
                </div>
            </div>
        </div>

        <div class="chart-wrapper">
            <div class="chart-container"><canvas id="xpChart"></canvas></div>
        </div>
        <div style="height: 100px;"></div>
    </div>

    <div id="workoutPage" class="section">
        <h2 class="section-title">рЃЋрЃљрЃарЃ»рЃўрЃерЃў</h2>
        <div style="padding: 0 20px;">
            <div id="workoutPageGrid" class="activity-grid"></div>
        </div>
        <div style="height: 100px;"></div>
    </div>

    <div id="arena" class="section">
        <h2 class="section-title">рЃљрЃарЃћрЃюрЃљ</h2>
        <div style="padding: 0 20px;">
            
            <div class="boss-card" id="bossCard">
                <div class="boss-header">
                    <div class="boss-icon" id="bossIconContainer"></div>
                    <div style="flex:1">
                        <strong class="boss-name" id="bossName">...</strong>
                        <div class="boss-hp-bg"><div class="boss-hp-fill" id="bossHpBar"></div></div>
                        <small id="bossHpText" style="color:#aaa; font-size:0.7rem;">0 / 0 HP</small>
                    </div>
                </div>
            </div>

            <div class="quest-card" id="questCard">
                <div class="quest-header">
                    <span class="quest-title">­ЪЊю рЃЊрЃдрЃўрЃА рЃЏрЃўрЃАрЃўрЃљ</span>
                </div>
                <p id="questText" class="quest-desc">...</p>
                <div class="quest-progress-bg"><div class="quest-progress-bar" id="questBar" style="width: 0%"></div></div>
            </div>
            
            <h3 class="shop-section-title" style="margin-top:30px;">Рўа№ИЈ рЃЊрЃљрЃЏрЃљрЃарЃфрЃ«рЃћрЃЉрЃБрЃџрЃў рЃЉрЃЮрЃАрЃћрЃЉрЃў</h3>
            <div id="graveyardGrid" class="shop-grid"><p style="color:#666; font-size:0.8rem;">рЃ»рЃћрЃа рЃљрЃарЃљрЃЋрЃўрЃю рЃЊрЃљрЃњрЃўрЃЏрЃљрЃарЃфрЃ«рЃћрЃЉрЃўрЃљ.</p></div>

            <div style="height: 100px;"></div>
        </div>
    </div>

    <div id="body" class="section">
        <h2 class="section-title">рЃАрЃ«рЃћрЃБрЃџрЃўрЃА рЃћрЃюрЃћрЃарЃњрЃўрЃљ</h2>
        
        <div class="body-layout">
            <div class="body-visual">
                <svg viewBox="0 0 200 400" class="human-body-svg">
                    <circle cx="100" cy="40" r="20" fill="#444" />
                    <path id="visual-chest" d="M70 65 L130 65 L120 110 L80 110 Z" class="muscle-part" />
                    <path id="visual-arms" d="M50 75 L70 65 L70 140 L50 140 M150 75 L130 65 L130 140 L150 140" class="muscle-part" />
                    <path id="visual-abs" d="M80 112 L120 112 L115 160 L85 160 Z" class="muscle-part" />
                    <path id="visual-legs" d="M85 162 L115 162 L125 320 L105 320 L100 230 L95 320 L75 320 Z" class="muscle-part" />
                </svg>
            </div>
            <div class="body-stats-list">
                <div class="stat-item-row"><div class="dot-indicator" id="dot-chest"></div><span>рЃЏрЃЎрЃћрЃарЃЊрЃў</span><small id="text-chest">100%</small></div>
                <div class="stat-item-row"><div class="dot-indicator" id="dot-arms"></div><span>рЃ«рЃћрЃџрЃћрЃЉрЃў</span><small id="text-arms">100%</small></div>
                <div class="stat-item-row"><div class="dot-indicator" id="dot-abs"></div><span>рЃърЃарЃћрЃАрЃў</span><small id="text-abs">100%</small></div>
                <div class="stat-item-row"><div class="dot-indicator" id="dot-legs"></div><span>рЃцрЃћрЃ«рЃћрЃЉрЃў</span><small id="text-legs">100%</small></div>
            </div>
        </div>
        <p id="recoveryStatusDisplay" style="text-align:center; font-size:0.8rem; margin-top:20px; font-weight:bold; min-height:20px;"></p>
        <div style="height: 100px;"></div>
    </div>

    <div id="profile" class="section">
        <h2 class="section-title">рЃърЃарЃЮрЃцрЃўрЃџрЃў</h2>
        <div class="profile-container">
            <div class="profile-header-simple">
                <div class="profile-avatar-large" onclick="window.openAvatarSelection()">
                    <span id="mainProfileAvatar" style="font-size: 50px;">­ЪЉц</span>
                    <div class="edit-icon">РюЈ№ИЈ</div>
                </div>
                <h2 class="profile-name-large" id="mainProfileName">...</h2>
                <div class="profile-rank-large" id="mainProfileRank">...</div>
            </div>
            <div class="profile-actions vertical-list">
                <div class="action-card shop-card" onclick="window.openShop()"><span class="card-icon">­ЪЏЇ</span><span>рЃЏрЃљрЃарЃЎрЃћрЃбрЃў</span></div>
                <div class="action-card" onclick="window.openInventory()"><span class="card-icon">­Ъјњ</span><span>рЃЕрЃљрЃюрЃЌрЃљ</span></div>
                <div class="action-card" onclick="window.openAchievements()"><span class="card-icon">­ЪЈє</span><span>рЃЏрЃўрЃдрЃгрЃћрЃЋрЃћрЃЉрЃў</span></div>
                <div class="action-card" onclick="window.openBetModal()"><span class="card-icon">­Ъј▓</span><span>рЃцрЃАрЃЮрЃюрЃў</span></div>
                <div class="action-card" onclick="window.openSettingsMenu()"><span class="card-icon">РџЎ№ИЈ</span><span>рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў</span></div>
            </div>
            <div id="activityLogContainer" class="log-container"></div>
            <div style="height: 100px;"></div>
        </div>
    </div>

    <div id="inputModal" class="modal">
        <div class="modal-content">
            <h3 id="inputTitle">рЃарЃљрЃЮрЃЊрЃћрЃюрЃЮрЃЉрЃљ?</h3>
            
            <div class="manual-input-container">
                <input type="number" id="workoutInput" class="input-field" placeholder="0" inputmode="numeric">
                <p id="inputUnit" style="color:#888;">...</p>
            </div>
            
            <button id="btnAiCam" class="btn-ai" onclick="window.startAiSession()" style="display:none;">
                ­ЪЊи рЃЎрЃљрЃЏрЃћрЃарЃўрЃЌ рЃЊрЃљрЃЌрЃЋрЃџрЃљ (AI)
            </button>

            <div class="modal-actions">
                <button class="btn-main" onclick="window.confirmWorkout()">рЃерЃћрЃюрЃљрЃ«рЃЋрЃљ</button>
                <button class="btn-close" onclick="window.closeModal('inputModal')">рЃњрЃљрЃБрЃЦрЃЏрЃћрЃЉрЃљ</button>
            </div>
        </div>
    </div>

    <div id="aiOverlay" class="ai-overlay" style="display:none;">
        <div class="ai-header">
            <span id="aiCountDisplay">0</span>
            <button class="btn-close-ai" onclick="window.stopAiSession()">рЃЊрЃљрЃАрЃарЃБрЃџрЃћрЃЉрЃљ</button>
        </div>
        <video id="webcam" autoplay playsinline></video>
        <canvas id="outputCanvas"></canvas>
        <div class="ai-instruction">рЃЊрЃљрЃЊрЃћрЃЌ рЃбрЃћрЃџрЃћрЃцрЃЮрЃюрЃў рЃўрЃљрЃбрЃљрЃЎрЃќрЃћ рЃњрЃЋрЃћрЃарЃЊрЃБрЃџрЃљрЃЊ. рЃБрЃюрЃЊрЃљ рЃЕрЃљрЃюрЃЊрЃћрЃА рЃЏрЃ«рЃљрЃарЃў, рЃўрЃЊрЃљрЃДрЃЋрЃў рЃЊрЃљ рЃЏрЃљрЃ»рЃљ.</div>
        <div id="aiFeedback"></div>
    </div>

    <div id="shopModal" class="modal"><div class="modal-content" style="max-height: 80vh; overflow-y: auto;"><h3>­ЪЏЇ рЃЏрЃљрЃдрЃљрЃќрЃўрЃљ</h3><div style="background:#333; padding:5px 10px; border-radius:10px;">­ЪфЎ <span id="shopCoinDisplay">0</span></div><h4 style="text-align:left; color:#888; margin:10px 0;">­ЪЏА№ИЈ рЃљрЃдрЃГрЃБрЃарЃЋрЃўрЃџрЃЮрЃЉрЃљ</h4><div id="shopGearGrid" class="shop-grid"></div><h4 style="text-align:left; color:#888; margin:20px 0;">­Ъњі рЃгрЃљрЃЏрЃџрЃћрЃЉрЃў</h4><div id="shopConsumablesGrid" class="shop-grid"></div><h4 style="text-align:left; color:#888; margin:20px 0;">­Ъје рЃЌрЃћрЃЏрЃћрЃЉрЃў</h4><div id="shopThemesGrid" class="shop-grid"></div><button class="btn-close" onclick="window.closeModal('shopModal')">рЃЊрЃљрЃ«рЃБрЃарЃЋрЃљ</button></div></div>
    <div id="inventoryModal" class="modal"><div class="modal-content"><h3>­Ъјњ рЃЕрЃљрЃюрЃЌрЃљ</h3><div id="activeEffectsDisplay"></div><div id="inventoryGrid" class="shop-grid"></div><button class="btn-close" onclick="window.closeModal('inventoryModal')">рЃЊрЃљрЃ«рЃБрЃарЃЋрЃљ</button></div></div>
    <div id="betModal" class="modal"><div class="modal-content"><h3>­Ъј▓ рЃцрЃАрЃЮрЃюрЃў</h3><p style="color:#aaa; font-size:0.9rem;">рЃЊрЃљрЃЊрЃћ рЃЮрЃЦрЃарЃЮ. 24 рЃАрЃљрЃљрЃЌрЃерЃў 200 XP-рЃўрЃА рЃЊрЃљрЃњрЃарЃЮрЃЋрЃћрЃЉрЃўрЃА рЃерЃћрЃЏрЃЌрЃ«рЃЋрЃћрЃЋрЃљрЃерЃў рЃЏрЃЮрЃўрЃњрЃћрЃЉ рЃЮрЃарЃЏрЃљрЃњрЃА.</p><input type="number" id="betAmountInput" class="input-field" placeholder="рЃарЃљрЃЮрЃЊрЃћрЃюрЃЮрЃЉрЃљ"><button class="btn-main" onclick="window.placeBet()">рЃЊрЃљрЃЊрЃћрЃЉрЃљ</button><button class="btn-close" onclick="window.closeModal('betModal')">рЃњрЃљрЃБрЃЦрЃЏрЃћрЃЉрЃљ</button></div></div>
    <div id="achievementsModal" class="modal"><div class="modal-content"><h3>­ЪЈє рЃЏрЃўрЃдрЃгрЃћрЃЋрЃћрЃЉрЃў</h3><div id="achievementsGrid" class="shop-grid"></div><button class="btn-close" onclick="window.closeModal('achievementsModal')">рЃЊрЃљрЃ«рЃБрЃарЃЋрЃљ</button></div></div>
    
    <div id="settingsMenuModal" class="modal">
        <div class="modal-content">
            <h3>РџЎ№ИЈ рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў</h3>
            <div class="settings-list">
                <div class="setting-item" onclick="window.openProfileEdit()">РюЈ№ИЈ рЃАрЃљрЃ«рЃћрЃџрЃўрЃА рЃерЃћрЃфрЃЋрЃџрЃљ</div>
                <div class="setting-item" onclick="window.openSportsEdit()">­ЪЈЁ рЃАрЃърЃЮрЃарЃбрЃўрЃА рЃљрЃарЃЕрЃћрЃЋрЃљ</div>
                <div class="setting-item text-red" onclick="window.resetAllData()">­ЪЌЉ рЃгрЃљрЃерЃџрЃљ</div>
            </div>
            
            <input type="text" id="secretCodeInput" class="modal-input" placeholder="Secret Code..." style="margin-top:20px; opacity:0.5; font-size:0.8rem;" oninput="window.checkSecretCode(this.value)">
            
            <div id="devMenu" style="display:none; margin-top:15px; border-top:1px solid #444; padding-top:10px; position:relative;">
                
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                    <h4 style="color:violet; margin:0;">­ЪЉЙ God Mode</h4>
                    <button class="btn-small" style="background:red; color:white; border:none; padding:5px 10px; border-radius:5px;" onclick="window.closeDevMenu()">Рюќ№ИЈ рЃЊрЃљрЃ«рЃБрЃарЃЋрЃљ</button>
                </div>

                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:5px;">
                    <button class="btn-small" style="background:#444; border:none; color:white; padding:8px; border-radius:8px;" onclick="window.devAddCoins()">Add Coins</button>
                    <button class="btn-small" style="background:#444; border:none; color:white; padding:8px; border-radius:8px;" onclick="window.devAddXp()">Add XP</button>
                    <button class="btn-small" style="background:#444; border:none; color:white; padding:8px; border-radius:8px; grid-column: span 2;" onclick="window.devSetMuscle()">Set Muscles %</button>
                    <button class="btn-small" style="background:#444; border:none; color:white; padding:8px; border-radius:8px; grid-column: span 2;" onclick="window.devUnlockAll()">­ЪћЊ Unlock All</button>
                </div>
            </div>

            <button class="btn-close" onclick="window.closeModal('settingsMenuModal')">рЃЊрЃљрЃ«рЃБрЃарЃЋрЃљ</button>
        </div>
    </div>

    <div id="editProfileModal" class="modal"><div class="modal-content"><h3>рЃарЃћрЃЊрЃљрЃЦрЃбрЃўрЃарЃћрЃЉрЃљ</h3><input type="text" id="modalNameInput" class="modal-input" placeholder="рЃАрЃљрЃ«рЃћрЃџрЃў"><input type="number" id="modalAgeInput" class="modal-input" placeholder="рЃљрЃАрЃљрЃЎрЃў"><button class="btn-main" onclick="window.saveProfileChanges()">рЃерЃћрЃюрЃљрЃ«рЃЋрЃљ</button></div></div>
    <div id="avatarModal" class="modal"><div class="modal-content"><h3>рЃљрЃўрЃарЃЕрЃўрЃћ рЃљрЃЋрЃљрЃбрЃљрЃарЃў</h3><div id="avatarGrid" class="avatar-grid"></div><button class="btn-close" onclick="window.closeModal('avatarModal')">рЃЊрЃљрЃ«рЃБрЃарЃЋрЃљ</button></div></div>
    <div id="sportsModal" class="modal"><div class="modal-content"><h3>­ЪЈЁ рЃљрЃўрЃарЃЕрЃўрЃћ рЃАрЃърЃЮрЃарЃбрЃў</h3><div id="sportsSelectorGrid" class="sports-grid"></div><button class="btn-main" onclick="window.closeModal('sportsModal')">рЃЊрЃљрЃАрЃарЃБрЃџрЃћрЃЉрЃљ</button></div></div>

    <nav class="navbar">
        <button class="nav-item active" onclick="window.showPage('home', this)"><svg class="nav-icon" viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg><span>рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў</span></button>
        <button class="nav-item" onclick="window.showPage('workoutPage', this)"><svg class="nav-icon" viewBox="0 0 24 24"><path d="M12 2v20M2 12h20"/></svg><span>рЃЋрЃљрЃарЃ»рЃўрЃерЃў</span></button>
        <button class="nav-item" onclick="window.showPage('arena', this)"><svg class="nav-icon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M15 9l-6 6"/><path d="M9 9l6 6"/></svg><span>рЃљрЃарЃћрЃюрЃљ</span></button>
        <button class="nav-item" onclick="window.showPage('body', this)"><svg class="nav-icon" viewBox="0 0 24 24"><path d="M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"/><line x1="16" y1="8" x2="2" y2="22"/><line x1="17.5" y1="15" x2="9" y2="15"/></svg><span>рЃАрЃ«рЃћрЃБрЃџрЃў</span></button>
        <button class="nav-item" onclick="window.showPage('profile', this)"><svg class="nav-icon" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg><span>рЃърЃарЃЮрЃцрЃўрЃџрЃў</span></button>
    </nav>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script type="module" src="data.js"></script>
    <script type="module" src="ui.js"></script>
    <script type="module" src="ai.js"></script>
    <script type="module" src="logic.js"></script>
    <script type="module" src="script.js"></script>
</body>
</html>